{
  "id": "magic-clothing-full-setup",
  "description": "MagicClothingに必要な全モデルとバグ修正パッチ",
  "downloads": [
    {
      "type": "huggingface",
      "repo_id": "SG161222/Realistic_Vision_V4.0_noVAE",
      "filename": "Realistic_Vision_V4.0.safetensors",
      "target_dir": "/app/ComfyUI/models/checkpoints",
      "rename_to": "Realistic_Vision_V4.0_noVAE.safetensors"
    },
    {
      "type": "huggingface",
      "repo_id": "ShineChen1024/MagicClothing",
      "filename": "early_access/OMS_1024_VTHD+DressCode_200000.safetensors",
      "target_dir": "/app/ComfyUI/models/unet",
      "rename_to": "OMS_1024_VTHD+DressCode_200000.safetensors"
    },
    {
      "type": "huggingface",
      "repo_id": "ShineChen1024/MagicClothing",
      "filename": "cloth_segm.pth",
      "target_dir": "/app/ComfyUI/models/checkpoints"
    },
    {
      "type": "huggingface",
      "repo_id": "h94/IP-Adapter",
      "filename": "models/image_encoder/model.safetensors",
      "target_dir": "/app/ComfyUI/models/clip_vision",
      "rename_to": "CLIP-ViT-H-14-laion2B-s32B-b79K.safetensors"
    },
    {
      "type": "huggingface",
      "repo_id": "h94/IP-Adapter-FaceID",
      "filename": "ip-adapter-faceid_sd15.bin",
      "target_dir": "/app/ComfyUI/models/ipadapter"
    },
    {
      "type": "huggingface",
      "repo_id": "h94/IP-Adapter-FaceID",
      "filename": "ip-adapter-faceid_sd15_lora.safetensors",
      "target_dir": "/app/ComfyUI/models/loras"
    }
  ],
  "symlinks": [
    {
      "src": "/app/ComfyUI/models/unet/OMS_1024_VTHD+DressCode_200000.safetensors",
      "dest": "/app/ComfyUI/custom_nodes/ComfyUI_MagicClothing/checkpoints/OMS_1024_VTHD+DressCode_200000.safetensors"
    },
    {
      "src": "/app/ComfyUI/models/checkpoints/cloth_segm.pth",
      "dest": "/app/ComfyUI/models/layer_model/cloth_segm.pth"
    }
  ],
  "patches": [
    {
      "file": "/app/ComfyUI/custom_nodes/ComfyUI_MagicClothing/pipelines/OmsDiffusionPipeline.py",
      "find": "if self.interrupt:",
      "replace": "if False: # self.interrupt: # Patched by Takumi"
    },
    {
      "file": "/app/ComfyUI/custom_nodes/ComfyUI_MagicClothing/garment_adapter/attention_processor.py",
      "find": "query = attn.to_q(hidden_states, *args)",
      "replace": "query = attn.to_q(hidden_states) # Patched by Takumi"
    },
    {
      "file": "/app/ComfyUI/custom_nodes/ComfyUI_MagicClothing/garment_adapter/attention_processor.py",
      "find": "key = attn.to_k(encoder_hidden_states, *args)",
      "replace": "key = attn.to_k(encoder_hidden_states) # Patched by Takumi"
    },
    {
      "file": "/app/ComfyUI/custom_nodes/ComfyUI_MagicClothing/garment_adapter/attention_processor.py",
      "find": "value = attn.to_v(encoder_hidden_states, *args)",
      "replace": "value = attn.to_v(encoder_hidden_states) # Patched by Takumi"
    },
    {
      "file": "/app/ComfyUI/custom_nodes/ComfyUI_MagicClothing/garment_adapter/attention_processor.py",
      "find": "hidden_states = attn.to_out[0](hidden_states, *args)",
      "replace": "hidden_states = attn.to_out[0](hidden_states) # Patched by Takumi"
    }
  ]
}